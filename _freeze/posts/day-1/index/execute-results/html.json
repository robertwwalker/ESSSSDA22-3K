{
  "hash": "46c161011aea545eea65e8d8d06721d4",
  "result": {
    "markdown": "---\ntitle: \"Day 1\"\nauthor: \"Robert W. Walker\"\ndate: \"08/08/2022\"\ncategories: [time series, code, analysis]\nimage: \"image.jpg\"\n---\n\n\n## Slides\n\n- [Slides in .pdf format](./slides/slidesDay1.pdf)\n- [A xaringan for presentation](https://rww.science/xaringan/ESSSSDA22-Day1/)\n\n# Code and Analysis\n\n[The data are in Stata format.](https://github.com/robertwwalker/Essex-Data/raw/master/ISQ99-Essex.dta)  The `github` for this course\n\n## Basic R commands\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(haven); library(kableExtra)\nHR.Data <- read_dta(url(\"https://github.com/robertwwalker/DADMStuff/raw/master/ISQ99-Essex.dta\"))\nlibrary(skimr)\nskim(HR.Data) %>% kable() %>% scroll_box(width=\"80%\", height=\"50%\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:50%; overflow-x: scroll; width:80%; \"><table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> skim_type </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> skim_variable </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> n_missing </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> complete_rate </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> numeric.mean </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> numeric.sd </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> numeric.p0 </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> numeric.p25 </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> numeric.p50 </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> numeric.p75 </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> numeric.p100 </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> numeric.hist </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> IDORIGIN </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1.0000000 </td>\n   <td style=\"text-align:right;\"> 446.7178771 </td>\n   <td style=\"text-align:right;\"> 243.1931782 </td>\n   <td style=\"text-align:right;\"> 2.00 </td>\n   <td style=\"text-align:right;\"> 290.000 </td>\n   <td style=\"text-align:right;\"> 435.000 </td>\n   <td style=\"text-align:right;\"> 640.00 </td>\n   <td style=\"text-align:right;\"> 990.00 </td>\n   <td style=\"text-align:left;\"> ▆▇▇▆▂ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> YEAR </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1.0000000 </td>\n   <td style=\"text-align:right;\"> 1984.5000000 </td>\n   <td style=\"text-align:right;\"> 5.1889328 </td>\n   <td style=\"text-align:right;\"> 1976.00 </td>\n   <td style=\"text-align:right;\"> 1980.000 </td>\n   <td style=\"text-align:right;\"> 1984.500 </td>\n   <td style=\"text-align:right;\"> 1989.00 </td>\n   <td style=\"text-align:right;\"> 1993.00 </td>\n   <td style=\"text-align:left;\"> ▇▆▇▆▇ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> AI </td>\n   <td style=\"text-align:right;\"> 1061 </td>\n   <td style=\"text-align:right;\"> 0.6707014 </td>\n   <td style=\"text-align:right;\"> 2.7533549 </td>\n   <td style=\"text-align:right;\"> 1.0752989 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 2.000 </td>\n   <td style=\"text-align:right;\"> 3.000 </td>\n   <td style=\"text-align:right;\"> 3.00 </td>\n   <td style=\"text-align:right;\"> 5.00 </td>\n   <td style=\"text-align:left;\"> ▃▇▇▃▂ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> SD </td>\n   <td style=\"text-align:right;\"> 587 </td>\n   <td style=\"text-align:right;\"> 0.8178150 </td>\n   <td style=\"text-align:right;\"> 2.2406072 </td>\n   <td style=\"text-align:right;\"> 1.1303528 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 1.000 </td>\n   <td style=\"text-align:right;\"> 2.000 </td>\n   <td style=\"text-align:right;\"> 3.00 </td>\n   <td style=\"text-align:right;\"> 5.00 </td>\n   <td style=\"text-align:left;\"> ▇▇▆▂▁ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> POLRT </td>\n   <td style=\"text-align:right;\"> 382 </td>\n   <td style=\"text-align:right;\"> 0.8814401 </td>\n   <td style=\"text-align:right;\"> 3.8095070 </td>\n   <td style=\"text-align:right;\"> 2.2230297 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 2.000 </td>\n   <td style=\"text-align:right;\"> 3.000 </td>\n   <td style=\"text-align:right;\"> 6.00 </td>\n   <td style=\"text-align:right;\"> 7.00 </td>\n   <td style=\"text-align:left;\"> ▇▂▂▁▇ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> MIL2 </td>\n   <td style=\"text-align:right;\"> 382 </td>\n   <td style=\"text-align:right;\"> 0.8814401 </td>\n   <td style=\"text-align:right;\"> 0.2725352 </td>\n   <td style=\"text-align:right;\"> 0.4453421 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:left;\"> ▇▁▁▁▃ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> LEFT </td>\n   <td style=\"text-align:right;\"> 393 </td>\n   <td style=\"text-align:right;\"> 0.8780261 </td>\n   <td style=\"text-align:right;\"> 0.1763874 </td>\n   <td style=\"text-align:right;\"> 0.3812168 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:left;\"> ▇▁▁▁▂ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> BRIT </td>\n   <td style=\"text-align:right;\"> 290 </td>\n   <td style=\"text-align:right;\"> 0.9099938 </td>\n   <td style=\"text-align:right;\"> 0.3553888 </td>\n   <td style=\"text-align:right;\"> 0.4787126 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:left;\"> ▇▁▁▁▅ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> PCGNP </td>\n   <td style=\"text-align:right;\"> 443 </td>\n   <td style=\"text-align:right;\"> 0.8625078 </td>\n   <td style=\"text-align:right;\"> 3591.6509536 </td>\n   <td style=\"text-align:right;\"> 5698.3554010 </td>\n   <td style=\"text-align:right;\"> 52.00 </td>\n   <td style=\"text-align:right;\"> 390.000 </td>\n   <td style=\"text-align:right;\"> 1112.000 </td>\n   <td style=\"text-align:right;\"> 3510.00 </td>\n   <td style=\"text-align:right;\"> 36670.00 </td>\n   <td style=\"text-align:left;\"> ▇▁▁▁▁ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> AINEW </td>\n   <td style=\"text-align:right;\"> 468 </td>\n   <td style=\"text-align:right;\"> 0.8547486 </td>\n   <td style=\"text-align:right;\"> 2.4433551 </td>\n   <td style=\"text-align:right;\"> 1.1558005 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 1.000 </td>\n   <td style=\"text-align:right;\"> 2.000 </td>\n   <td style=\"text-align:right;\"> 3.00 </td>\n   <td style=\"text-align:right;\"> 5.00 </td>\n   <td style=\"text-align:left;\"> ▇▇▇▃▂ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> SDNEW </td>\n   <td style=\"text-align:right;\"> 468 </td>\n   <td style=\"text-align:right;\"> 0.8547486 </td>\n   <td style=\"text-align:right;\"> 2.2618010 </td>\n   <td style=\"text-align:right;\"> 1.1365604 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 1.000 </td>\n   <td style=\"text-align:right;\"> 2.000 </td>\n   <td style=\"text-align:right;\"> 3.00 </td>\n   <td style=\"text-align:right;\"> 5.00 </td>\n   <td style=\"text-align:left;\"> ▇▇▆▂▁ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> IDGURR </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1.0000000 </td>\n   <td style=\"text-align:right;\"> 455.7709497 </td>\n   <td style=\"text-align:right;\"> 246.5201369 </td>\n   <td style=\"text-align:right;\"> 2.00 </td>\n   <td style=\"text-align:right;\"> 290.000 </td>\n   <td style=\"text-align:right;\"> 450.000 </td>\n   <td style=\"text-align:right;\"> 663.00 </td>\n   <td style=\"text-align:right;\"> 990.00 </td>\n   <td style=\"text-align:left;\"> ▆▇▇▇▃ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> AILAG </td>\n   <td style=\"text-align:right;\"> 644 </td>\n   <td style=\"text-align:right;\"> 0.8001241 </td>\n   <td style=\"text-align:right;\"> 2.4499612 </td>\n   <td style=\"text-align:right;\"> 1.1479673 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 1.000 </td>\n   <td style=\"text-align:right;\"> 2.000 </td>\n   <td style=\"text-align:right;\"> 3.00 </td>\n   <td style=\"text-align:right;\"> 5.00 </td>\n   <td style=\"text-align:left;\"> ▇▇▇▃▂ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> SDLAG </td>\n   <td style=\"text-align:right;\"> 644 </td>\n   <td style=\"text-align:right;\"> 0.8001241 </td>\n   <td style=\"text-align:right;\"> 2.2470908 </td>\n   <td style=\"text-align:right;\"> 1.1156632 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 1.000 </td>\n   <td style=\"text-align:right;\"> 2.000 </td>\n   <td style=\"text-align:right;\"> 3.00 </td>\n   <td style=\"text-align:right;\"> 5.00 </td>\n   <td style=\"text-align:left;\"> ▇▇▆▂▁ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> PERCHPCG </td>\n   <td style=\"text-align:right;\"> 618 </td>\n   <td style=\"text-align:right;\"> 0.8081937 </td>\n   <td style=\"text-align:right;\"> 4.6138441 </td>\n   <td style=\"text-align:right;\"> 13.2208934 </td>\n   <td style=\"text-align:right;\"> -95.50 </td>\n   <td style=\"text-align:right;\"> -2.545 </td>\n   <td style=\"text-align:right;\"> 4.615 </td>\n   <td style=\"text-align:right;\"> 11.76 </td>\n   <td style=\"text-align:right;\"> 128.57 </td>\n   <td style=\"text-align:left;\"> ▁▂▇▁▁ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> PERCHPOP </td>\n   <td style=\"text-align:right;\"> 293 </td>\n   <td style=\"text-align:right;\"> 0.9090627 </td>\n   <td style=\"text-align:right;\"> 2.1928815 </td>\n   <td style=\"text-align:right;\"> 4.0424128 </td>\n   <td style=\"text-align:right;\"> -48.45 </td>\n   <td style=\"text-align:right;\"> 0.910 </td>\n   <td style=\"text-align:right;\"> 2.220 </td>\n   <td style=\"text-align:right;\"> 2.94 </td>\n   <td style=\"text-align:right;\"> 126.01 </td>\n   <td style=\"text-align:left;\"> ▁▇▁▁▁ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> LPOP </td>\n   <td style=\"text-align:right;\"> 115 </td>\n   <td style=\"text-align:right;\"> 0.9643079 </td>\n   <td style=\"text-align:right;\"> 15.4819279 </td>\n   <td style=\"text-align:right;\"> 1.8633316 </td>\n   <td style=\"text-align:right;\"> 11.00 </td>\n   <td style=\"text-align:right;\"> 14.510 </td>\n   <td style=\"text-align:right;\"> 15.590 </td>\n   <td style=\"text-align:right;\"> 16.64 </td>\n   <td style=\"text-align:right;\"> 20.89 </td>\n   <td style=\"text-align:left;\"> ▂▃▇▃▁ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> PCGTHOU </td>\n   <td style=\"text-align:right;\"> 443 </td>\n   <td style=\"text-align:right;\"> 0.8625078 </td>\n   <td style=\"text-align:right;\"> 3.5916985 </td>\n   <td style=\"text-align:right;\"> 5.6983334 </td>\n   <td style=\"text-align:right;\"> 0.05 </td>\n   <td style=\"text-align:right;\"> 0.390 </td>\n   <td style=\"text-align:right;\"> 1.110 </td>\n   <td style=\"text-align:right;\"> 3.51 </td>\n   <td style=\"text-align:right;\"> 36.67 </td>\n   <td style=\"text-align:left;\"> ▇▁▁▁▁ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> DEMOC3 </td>\n   <td style=\"text-align:right;\"> 793 </td>\n   <td style=\"text-align:right;\"> 0.7538796 </td>\n   <td style=\"text-align:right;\"> 3.6817620 </td>\n   <td style=\"text-align:right;\"> 4.3577178 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 9.00 </td>\n   <td style=\"text-align:right;\"> 10.00 </td>\n   <td style=\"text-align:left;\"> ▇▁▁▂▃ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> CWARCOW </td>\n   <td style=\"text-align:right;\"> 407 </td>\n   <td style=\"text-align:right;\"> 0.8736809 </td>\n   <td style=\"text-align:right;\"> 0.0920071 </td>\n   <td style=\"text-align:right;\"> 0.2890873 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:left;\"> ▇▁▁▁▁ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> numeric </td>\n   <td style=\"text-align:left;\"> IWARCOW2 </td>\n   <td style=\"text-align:right;\"> 380 </td>\n   <td style=\"text-align:right;\"> 0.8820608 </td>\n   <td style=\"text-align:right;\"> 0.0862069 </td>\n   <td style=\"text-align:right;\"> 0.2807187 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:left;\"> ▇▁▁▁▁ </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\n\n## More R summary\n\nA little function that I wrote up on `github`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.3.6     ✔ purrr   0.3.4\n✔ tibble  3.1.8     ✔ dplyr   1.0.9\n✔ tidyr   1.2.0     ✔ stringr 1.4.0\n✔ readr   2.1.2     ✔ forcats 0.5.1\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter()     masks stats::filter()\n✖ dplyr::group_rows() masks kableExtra::group_rows()\n✖ dplyr::lag()        masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlibrary(plm)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'plm'\n\nThe following objects are masked from 'package:dplyr':\n\n    between, lag, lead\n```\n:::\n\n```{.r .cell-code}\nsource(url(\"https://raw.githubusercontent.com/robertwwalker/DADMStuff/master/xtsum.R\"))\n# Be careful with the ID variable, the safest is to make it factor; this can go wildly wrong\nxtsum(IDORIGIN~., data=HR.Data) %>% kable() %>% scroll_box(width=\"80%\", height=\"50%\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nNote: Using an external vector in selections is ambiguous.\nℹ Use `all_of(unit)` instead of `unit` to silence this message.\nℹ See <https://tidyselect.r-lib.org/reference/faq-external-vector.html>.\nThis message is displayed once per session.\n```\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:50%; overflow-x: scroll; width:80%; \"><table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\">   </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> O.mean </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> O.sd </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> O.min </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> O.max </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> O.SumSQ </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> O.N </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> B.mean </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> B.sd </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> B.min </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> B.max </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> B.Units </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> B.t.bar </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> W.sd </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> W.min </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> W.max </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> W.SumSQ </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> Within.Ovr.Ratio </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> YEAR </td>\n   <td style=\"text-align:left;\"> 1984.5 </td>\n   <td style=\"text-align:left;\"> 5.189 </td>\n   <td style=\"text-align:left;\"> 1976 </td>\n   <td style=\"text-align:left;\"> 1993 </td>\n   <td style=\"text-align:left;\"> 86725.5 </td>\n   <td style=\"text-align:left;\"> 3222 </td>\n   <td style=\"text-align:left;\"> 1984.5 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 1984.5 </td>\n   <td style=\"text-align:left;\"> 1984.5 </td>\n   <td style=\"text-align:left;\"> 179 </td>\n   <td style=\"text-align:left;\"> 18 </td>\n   <td style=\"text-align:left;\"> 5.189 </td>\n   <td style=\"text-align:left;\"> -8.5 </td>\n   <td style=\"text-align:left;\"> 8.5 </td>\n   <td style=\"text-align:left;\"> 86725.5 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> AI </td>\n   <td style=\"text-align:left;\"> 2.753 </td>\n   <td style=\"text-align:left;\"> 1.075 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:left;\"> 2497.538 </td>\n   <td style=\"text-align:left;\"> 2161 </td>\n   <td style=\"text-align:left;\"> 2.498 </td>\n   <td style=\"text-align:left;\"> 0.989 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:left;\"> 173 </td>\n   <td style=\"text-align:left;\"> 12.491 </td>\n   <td style=\"text-align:left;\"> 0.631 </td>\n   <td style=\"text-align:left;\"> -2.375 </td>\n   <td style=\"text-align:left;\"> 2.5625 </td>\n   <td style=\"text-align:left;\"> 860.822 </td>\n   <td style=\"text-align:left;\"> 0.345 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> SD </td>\n   <td style=\"text-align:left;\"> 2.241 </td>\n   <td style=\"text-align:left;\"> 1.13 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:left;\"> 3365.455 </td>\n   <td style=\"text-align:left;\"> 2635 </td>\n   <td style=\"text-align:left;\"> 2.241 </td>\n   <td style=\"text-align:left;\"> 1.004 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:left;\"> 178 </td>\n   <td style=\"text-align:left;\"> 14.803 </td>\n   <td style=\"text-align:left;\"> 0.624 </td>\n   <td style=\"text-align:left;\"> -2.666667 </td>\n   <td style=\"text-align:left;\"> 3.0625 </td>\n   <td style=\"text-align:left;\"> 1025.695 </td>\n   <td style=\"text-align:left;\"> 0.305 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> POLRT </td>\n   <td style=\"text-align:left;\"> 3.81 </td>\n   <td style=\"text-align:left;\"> 2.223 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 7 </td>\n   <td style=\"text-align:left;\"> 14029.94 </td>\n   <td style=\"text-align:left;\"> 2840 </td>\n   <td style=\"text-align:left;\"> 3.78 </td>\n   <td style=\"text-align:left;\"> 1.99 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 7 </td>\n   <td style=\"text-align:left;\"> 179 </td>\n   <td style=\"text-align:left;\"> 15.866 </td>\n   <td style=\"text-align:left;\"> 0.925 </td>\n   <td style=\"text-align:left;\"> -4 </td>\n   <td style=\"text-align:left;\"> 4.777778 </td>\n   <td style=\"text-align:left;\"> 2428.552 </td>\n   <td style=\"text-align:left;\"> 0.173 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> MIL2 </td>\n   <td style=\"text-align:left;\"> 0.273 </td>\n   <td style=\"text-align:left;\"> 0.445 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 563.058 </td>\n   <td style=\"text-align:left;\"> 2840 </td>\n   <td style=\"text-align:left;\"> 0.24 </td>\n   <td style=\"text-align:left;\"> 0.377 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 179 </td>\n   <td style=\"text-align:left;\"> 15.866 </td>\n   <td style=\"text-align:left;\"> 0.216 </td>\n   <td style=\"text-align:left;\"> -0.9444444 </td>\n   <td style=\"text-align:left;\"> 0.8888889 </td>\n   <td style=\"text-align:left;\"> 132.778 </td>\n   <td style=\"text-align:left;\"> 0.236 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> LEFT </td>\n   <td style=\"text-align:left;\"> 0.176 </td>\n   <td style=\"text-align:left;\"> 0.381 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 410.983 </td>\n   <td style=\"text-align:left;\"> 2829 </td>\n   <td style=\"text-align:left;\"> 0.157 </td>\n   <td style=\"text-align:left;\"> 0.334 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 179 </td>\n   <td style=\"text-align:left;\"> 15.804 </td>\n   <td style=\"text-align:left;\"> 0.157 </td>\n   <td style=\"text-align:left;\"> -0.8888889 </td>\n   <td style=\"text-align:left;\"> 0.8888889 </td>\n   <td style=\"text-align:left;\"> 69.611 </td>\n   <td style=\"text-align:left;\"> 0.169 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> BRIT </td>\n   <td style=\"text-align:left;\"> 0.355 </td>\n   <td style=\"text-align:left;\"> 0.479 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 671.685 </td>\n   <td style=\"text-align:left;\"> 2932 </td>\n   <td style=\"text-align:left;\"> 0.335 </td>\n   <td style=\"text-align:left;\"> 0.473 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 179 </td>\n   <td style=\"text-align:left;\"> 16.38 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> PCGNP </td>\n   <td style=\"text-align:left;\"> 3591.651 </td>\n   <td style=\"text-align:left;\"> 5698.355 </td>\n   <td style=\"text-align:left;\"> 52 </td>\n   <td style=\"text-align:left;\"> 36670 </td>\n   <td style=\"text-align:left;\"> 90205144379 </td>\n   <td style=\"text-align:left;\"> 2779 </td>\n   <td style=\"text-align:left;\"> 3449.178 </td>\n   <td style=\"text-align:left;\"> 5049.297 </td>\n   <td style=\"text-align:left;\"> 112.2222 </td>\n   <td style=\"text-align:left;\"> 22653.89 </td>\n   <td style=\"text-align:left;\"> 173 </td>\n   <td style=\"text-align:left;\"> 16.064 </td>\n   <td style=\"text-align:left;\"> 2278.412 </td>\n   <td style=\"text-align:left;\"> -12303.33 </td>\n   <td style=\"text-align:left;\"> 16961.67 </td>\n   <td style=\"text-align:left;\"> 14421042273 </td>\n   <td style=\"text-align:left;\"> 0.16 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> AINEW </td>\n   <td style=\"text-align:left;\"> 2.443 </td>\n   <td style=\"text-align:left;\"> 1.156 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:left;\"> 3677.663 </td>\n   <td style=\"text-align:left;\"> 2754 </td>\n   <td style=\"text-align:left;\"> 2.379 </td>\n   <td style=\"text-align:left;\"> 1.012 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:left;\"> 178 </td>\n   <td style=\"text-align:left;\"> 15.472 </td>\n   <td style=\"text-align:left;\"> 0.622 </td>\n   <td style=\"text-align:left;\"> -2.388889 </td>\n   <td style=\"text-align:left;\"> 2.944444 </td>\n   <td style=\"text-align:left;\"> 1064.102 </td>\n   <td style=\"text-align:left;\"> 0.289 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> SDNEW </td>\n   <td style=\"text-align:left;\"> 2.262 </td>\n   <td style=\"text-align:left;\"> 1.137 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:left;\"> 3556.241 </td>\n   <td style=\"text-align:left;\"> 2754 </td>\n   <td style=\"text-align:left;\"> 2.253 </td>\n   <td style=\"text-align:left;\"> 1.006 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:left;\"> 178 </td>\n   <td style=\"text-align:left;\"> 15.472 </td>\n   <td style=\"text-align:left;\"> 0.631 </td>\n   <td style=\"text-align:left;\"> -2.588235 </td>\n   <td style=\"text-align:left;\"> 3 </td>\n   <td style=\"text-align:left;\"> 1096.442 </td>\n   <td style=\"text-align:left;\"> 0.308 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> IDGURR </td>\n   <td style=\"text-align:left;\"> 455.771 </td>\n   <td style=\"text-align:left;\"> 246.52 </td>\n   <td style=\"text-align:left;\"> 2 </td>\n   <td style=\"text-align:left;\"> 990 </td>\n   <td style=\"text-align:left;\"> 195747185 </td>\n   <td style=\"text-align:left;\"> 3222 </td>\n   <td style=\"text-align:left;\"> 455.771 </td>\n   <td style=\"text-align:left;\"> 247.173 </td>\n   <td style=\"text-align:left;\"> 2 </td>\n   <td style=\"text-align:left;\"> 990 </td>\n   <td style=\"text-align:left;\"> 179 </td>\n   <td style=\"text-align:left;\"> 18 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> AILAG </td>\n   <td style=\"text-align:left;\"> 2.45 </td>\n   <td style=\"text-align:left;\"> 1.148 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:left;\"> 3396.045 </td>\n   <td style=\"text-align:left;\"> 2578 </td>\n   <td style=\"text-align:left;\"> 2.402 </td>\n   <td style=\"text-align:left;\"> 1.039 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:left;\"> 177 </td>\n   <td style=\"text-align:left;\"> 14.565 </td>\n   <td style=\"text-align:left;\"> 0.609 </td>\n   <td style=\"text-align:left;\"> -2.411765 </td>\n   <td style=\"text-align:left;\"> 3 </td>\n   <td style=\"text-align:left;\"> 955.37 </td>\n   <td style=\"text-align:left;\"> 0.281 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> SDLAG </td>\n   <td style=\"text-align:left;\"> 2.247 </td>\n   <td style=\"text-align:left;\"> 1.116 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:left;\"> 3207.603 </td>\n   <td style=\"text-align:left;\"> 2578 </td>\n   <td style=\"text-align:left;\"> 2.236 </td>\n   <td style=\"text-align:left;\"> 0.991 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:left;\"> 177 </td>\n   <td style=\"text-align:left;\"> 14.565 </td>\n   <td style=\"text-align:left;\"> 0.608 </td>\n   <td style=\"text-align:left;\"> -2.5 </td>\n   <td style=\"text-align:left;\"> 3.058824 </td>\n   <td style=\"text-align:left;\"> 952.174 </td>\n   <td style=\"text-align:left;\"> 0.297 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> PERCHPCG </td>\n   <td style=\"text-align:left;\"> 4.614 </td>\n   <td style=\"text-align:left;\"> 13.221 </td>\n   <td style=\"text-align:left;\"> -95.5 </td>\n   <td style=\"text-align:left;\"> 128.57 </td>\n   <td style=\"text-align:left;\"> 454983.6 </td>\n   <td style=\"text-align:left;\"> 2604 </td>\n   <td style=\"text-align:left;\"> 3.325 </td>\n   <td style=\"text-align:left;\"> 6.893 </td>\n   <td style=\"text-align:left;\"> -36.21333 </td>\n   <td style=\"text-align:left;\"> 15.03765 </td>\n   <td style=\"text-align:left;\"> 168 </td>\n   <td style=\"text-align:left;\"> 15.5 </td>\n   <td style=\"text-align:left;\"> 12.393 </td>\n   <td style=\"text-align:left;\"> -92.50235 </td>\n   <td style=\"text-align:left;\"> 114.8882 </td>\n   <td style=\"text-align:left;\"> 399763 </td>\n   <td style=\"text-align:left;\"> 0.879 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> PERCHPOP </td>\n   <td style=\"text-align:left;\"> 2.193 </td>\n   <td style=\"text-align:left;\"> 4.042 </td>\n   <td style=\"text-align:left;\"> -48.45 </td>\n   <td style=\"text-align:left;\"> 126.01 </td>\n   <td style=\"text-align:left;\"> 47846.75 </td>\n   <td style=\"text-align:left;\"> 2929 </td>\n   <td style=\"text-align:left;\"> 2.842 </td>\n   <td style=\"text-align:left;\"> 9.443 </td>\n   <td style=\"text-align:left;\"> -2.126471 </td>\n   <td style=\"text-align:left;\"> 126.01 </td>\n   <td style=\"text-align:left;\"> 176 </td>\n   <td style=\"text-align:left;\"> 16.642 </td>\n   <td style=\"text-align:left;\"> 3.018 </td>\n   <td style=\"text-align:left;\"> -48.12235 </td>\n   <td style=\"text-align:left;\"> 80.69765 </td>\n   <td style=\"text-align:left;\"> 26663.59 </td>\n   <td style=\"text-align:left;\"> 0.557 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> LPOP </td>\n   <td style=\"text-align:left;\"> 15.482 </td>\n   <td style=\"text-align:left;\"> 1.863 </td>\n   <td style=\"text-align:left;\"> 11 </td>\n   <td style=\"text-align:left;\"> 20.89 </td>\n   <td style=\"text-align:left;\"> 10784.05 </td>\n   <td style=\"text-align:left;\"> 3107 </td>\n   <td style=\"text-align:left;\"> 15.488 </td>\n   <td style=\"text-align:left;\"> 1.844 </td>\n   <td style=\"text-align:left;\"> 11.09056 </td>\n   <td style=\"text-align:left;\"> 20.76889 </td>\n   <td style=\"text-align:left;\"> 177 </td>\n   <td style=\"text-align:left;\"> 17.554 </td>\n   <td style=\"text-align:left;\"> 0.129 </td>\n   <td style=\"text-align:left;\"> -0.7288889 </td>\n   <td style=\"text-align:left;\"> 0.7311111 </td>\n   <td style=\"text-align:left;\"> 51.883 </td>\n   <td style=\"text-align:left;\"> 0.005 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> PCGTHOU </td>\n   <td style=\"text-align:left;\"> 3.592 </td>\n   <td style=\"text-align:left;\"> 5.698 </td>\n   <td style=\"text-align:left;\"> 0.05 </td>\n   <td style=\"text-align:left;\"> 36.67 </td>\n   <td style=\"text-align:left;\"> 90204.45 </td>\n   <td style=\"text-align:left;\"> 2779 </td>\n   <td style=\"text-align:left;\"> 3.449 </td>\n   <td style=\"text-align:left;\"> 5.049 </td>\n   <td style=\"text-align:left;\"> 0.1122222 </td>\n   <td style=\"text-align:left;\"> 22.65389 </td>\n   <td style=\"text-align:left;\"> 173 </td>\n   <td style=\"text-align:left;\"> 16.064 </td>\n   <td style=\"text-align:left;\"> 2.278 </td>\n   <td style=\"text-align:left;\"> -12.30333 </td>\n   <td style=\"text-align:left;\"> 16.96167 </td>\n   <td style=\"text-align:left;\"> 14420.95 </td>\n   <td style=\"text-align:left;\"> 0.16 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> DEMOC3 </td>\n   <td style=\"text-align:left;\"> 3.682 </td>\n   <td style=\"text-align:left;\"> 4.358 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 10 </td>\n   <td style=\"text-align:left;\"> 46107 </td>\n   <td style=\"text-align:left;\"> 2429 </td>\n   <td style=\"text-align:left;\"> 3.774 </td>\n   <td style=\"text-align:left;\"> 3.96 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 10 </td>\n   <td style=\"text-align:left;\"> 155 </td>\n   <td style=\"text-align:left;\"> 15.671 </td>\n   <td style=\"text-align:left;\"> 1.726 </td>\n   <td style=\"text-align:left;\"> -7.277778 </td>\n   <td style=\"text-align:left;\"> 7.941176 </td>\n   <td style=\"text-align:left;\"> 7229.815 </td>\n   <td style=\"text-align:left;\"> 0.157 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CWARCOW </td>\n   <td style=\"text-align:left;\"> 0.092 </td>\n   <td style=\"text-align:left;\"> 0.289 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 235.17 </td>\n   <td style=\"text-align:left;\"> 2815 </td>\n   <td style=\"text-align:left;\"> 0.095 </td>\n   <td style=\"text-align:left;\"> 0.245 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 179 </td>\n   <td style=\"text-align:left;\"> 15.726 </td>\n   <td style=\"text-align:left;\"> 0.175 </td>\n   <td style=\"text-align:left;\"> -0.8888889 </td>\n   <td style=\"text-align:left;\"> 0.9444444 </td>\n   <td style=\"text-align:left;\"> 85.693 </td>\n   <td style=\"text-align:left;\"> 0.364 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> IWARCOW2 </td>\n   <td style=\"text-align:left;\"> 0.086 </td>\n   <td style=\"text-align:left;\"> 0.281 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 223.879 </td>\n   <td style=\"text-align:left;\"> 2842 </td>\n   <td style=\"text-align:left;\"> 0.092 </td>\n   <td style=\"text-align:left;\"> 0.227 </td>\n   <td style=\"text-align:left;\"> 0 </td>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:left;\"> 179 </td>\n   <td style=\"text-align:left;\"> 15.877 </td>\n   <td style=\"text-align:left;\"> 0.19 </td>\n   <td style=\"text-align:left;\"> -0.8888889 </td>\n   <td style=\"text-align:left;\"> 0.9444444 </td>\n   <td style=\"text-align:left;\"> 102.992 </td>\n   <td style=\"text-align:left;\"> 0.46 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\n\n## The Core Idea\n\nIn R, this is an essential `group_by` calculation in the `tidyverse`.  The within data is the overall data with group means subtracted.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nHR.Data %>% \n  group_by(IDORIGIN) %>% \n  mutate(DEMOC.Centered = \n           DEMOC3 - mean(DEMOC3, na.rm=TRUE)) %>%\n  filter(IDORIGIN==42) %>% \n  select(IDORIGIN, YEAR, DEMOC3, DEMOC.Centered) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 18 × 4\n# Groups:   IDORIGIN [1]\n   IDORIGIN  YEAR DEMOC3 DEMOC.Centered\n      <dbl> <dbl>  <dbl>          <dbl>\n 1       42  1976      1         -5.11 \n 2       42  1977      1         -5.11 \n 3       42  1978      6         -0.111\n 4       42  1979      6         -0.111\n 5       42  1980      6         -0.111\n 6       42  1981      6         -0.111\n 7       42  1982      7          0.889\n 8       42  1983      7          0.889\n 9       42  1984      7          0.889\n10       42  1985      7          0.889\n11       42  1986      7          0.889\n12       42  1987      7          0.889\n13       42  1988      7          0.889\n14       42  1989      7          0.889\n15       42  1990      7          0.889\n16       42  1991      7          0.889\n17       42  1992      7          0.889\n18       42  1993      7          0.889\n```\n:::\n:::\n\n\nIn Stata, the key is to first load and declare the data.\n\n```\nuse \"https://github.com/robertwwalker/Essex-Data/raw/main/ISQ99-Essex.dta\"\ndes\n```\n\n![Stata Load](./slides/StataLoad.png)\n\n`xtset` denotes two key features of the data, the $i$ and $t$.\n\n```\nxtset IDORIGIN YEAR\n```\n\n![xtset](./slides/xtset.png)\n\nStata has internal capabilities for summarising and describing `xt` data.  A between and within summary is given by `xtsum`\n\n```\nxtsum\n```\n\n![xtsum](./slides/xtsum.png)\n\nThe description can be deceptive **because the indices are a complete grid.**\n\n```\nxtdes\n```\n\n![xtdes](./slides/xtdes.png)\n\n# Leads and Lags\n\nThe core operators in Stata lead with a letter before `.`  With panel data, we will need to be cautious of the grouping.\n\n- F is forward, \n- L is Lag, \n- D is difference.\n\n![Operators](./slides/Operators.png)\n\n## Qualitative Variables\n\n### `xttab`\n\n- Between: How many units received each category?\n- Within: Of all observations of units that received that category at least once, what percent of observations take this value?\n\n```\nxttab AINEW\n```\n\n![xttab](./slides/xttab.png)\n\n### The Between\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbetween.tally <- function(x) {\nHR.Data %>% select(IDORIGIN, AINEW) %>% filter(AINEW==x) %$% table(IDORIGIN) %>% length()\n}\nsapply(c(1:5), function(x) {between.tally(x)})\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1]  96 121 113  86  43\n```\n:::\n:::\n\n\n### `xttrans`\n\nA first-order transition matrix.\n\n```\nxttrans AINEW\n```\n\n![xttrans](./slides/xttrans.png)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(magrittr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'magrittr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following object is masked from 'package:purrr':\n\n    set_names\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following object is masked from 'package:tidyr':\n\n    extract\n```\n:::\n\n```{.r .cell-code}\nHR.Data %>% \n  group_by(IDORIGIN) %>% \n  mutate(Lag.AI = lag(AINEW, 1)) %$% \n  table(AINEW, Lag.AI)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     Lag.AI\nAINEW   1   2   3   4   5\n    1 705   0   0   0   0\n    2   0 769   0   0   0\n    3   0   0 782   0   0\n    4   0   0   0 350   0\n    5   0   0   0   0 148\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}